<div class="form-group">
	
    <!-- Item Materiales y Residuos -->
	<div class="panel panel-default mb15">
    
        <div class="page-title clearfix">
            <h1><?php echo lang("materials_and_waste"); ?></h1>
        </div>
        
        <div class="panel-body">
        
            <div class="col-md-12">
                <div class="panel panel-default">
                   <div class="page-title clearfix panel-success">
                      <!--<h3>Cambio climático</h3> -->
                      <div class="pt10 pb10 text-center"><?php echo lang("total_waste_produced"); ?></div>
                   </div>
                   <div class="panel-body">
                         <!--<div id="grafico_carbono"margin: 0 auto;"> -->
                      <div id="grafico_total_waste_produced" style="height: 240px;"></div>
                   </div>
                </div>
            </div>
            
            <div class="col-md-12">
                <div class="panel panel-default">
                   <div class="page-title clearfix panel-success">
                      <!--<h3>Cambio climático</h3> -->
                      <div class="pt10 pb10 text-center"><?php echo lang("waste_recycling"); ?></div>
                   </div>
                   <div class="panel-body">
                         <!--<div id="grafico_carbono"margin: 0 auto;"> -->
                      <div id="grafico_waste_recycling_totals" style="height: 240px;"></div>
                   </div>
                </div>
            </div>
        
        </div>

	</div>
    
    
    <!-- Item Emisiones -->
    <div class="panel panel-default mb15">
    
        <div class="page-title clearfix">
            <h1><?php echo lang("emissions"); ?></h1>
        </div>
        
        <div class="panel-body">

            <div class="col-md-12">
                <div class="panel panel-default">
                   <div class="page-title clearfix panel-success">
                      <!--<h3>Cambio climático</h3> -->
                      <div class="pt10 pb10 text-center"><?php echo lang("total_emissions_by_source"); ?></div>
                   </div>
                   <div class="panel-body">
                         <!--<div id="grafico_carbono"margin: 0 auto;"> -->
                      <div id="grafico_total_emissions_by_source" style="height: 240px;"></div>
                   </div>
                </div>
            </div>
        
        </div>

	</div>
    
    
    <!-- Item Energía -->
    <div class="panel panel-default mb15">
    
        <div class="page-title clearfix">
            <h1><?php echo lang("energy"); ?></h1>
        </div>
        
        <div class="panel-body">
        
            <div class="col-md-12">
                <div class="panel panel-default">
                   <div class="page-title clearfix panel-success">
                      <!--<h3>Cambio climático</h3> -->
                      <div class="pt10 pb10 text-center"><?php echo lang("total_energy_consumption"); ?></div>
                   </div>
                   <div class="panel-body">
                         <!--<div id="grafico_carbono"margin: 0 auto;"> -->
                      <div id="grafico_total_energy_consumption" style="height: 240px;"></div>
                   </div>
                </div>
            </div>
            
            <div class="col-md-12">
                <div class="panel panel-default">
                   <div class="page-title clearfix panel-success">
                      <!--<h3>Cambio climático</h3> -->
                      <div class="pt10 pb10 text-center"><?php echo lang("energy_consumption_source_type"); ?></div>
                   </div>
                   <div class="panel-body">
                         <!--<div id="grafico_carbono"margin: 0 auto;"> -->
                      <div id="grafico_energy_consumption_source_type" style="height: 240px;"></div>
                   </div>
                </div>
            </div>
        
        </div>

	</div>
    
    
    <!-- Item Agua -->
    <div class="panel panel-default mb15">
    
        <div class="page-title clearfix">
            <h1><?php echo lang("water"); ?></h1>
        </div>
        
        <div class="panel-body">
        
            <div class="col-md-12">
                <div class="panel panel-default">
                   <div class="page-title clearfix panel-success">
                      <!--<h3>Cambio climático</h3> -->
                      <div class="pt10 pb10 text-center"><?php echo lang("total_water_consumption"); ?></div>
                   </div>
                   <div class="panel-body">
                         <!--<div id="grafico_carbono"margin: 0 auto;"> -->
                      <div id="grafico_total_water_consumption" style="height: 240px;"></div>
                   </div>
                </div>
            </div>
            
            <div class="col-md-12">
                <div class="panel panel-default">
                   <div class="page-title clearfix panel-success">
                      <!--<h3>Cambio climático</h3> -->
                      <div class="pt10 pb10 text-center"><?php echo lang("water_consumption_by_origin"); ?></div>
                   </div>
                   <div class="panel-body">
                         <!--<div id="grafico_carbono"margin: 0 auto;"> -->
                      <div id="grafico_water_consumption_by_origin" style="height: 240px;"></div>
                   </div>
                </div>
            </div>
            
            <div class="col-md-12">
                <div class="panel panel-default">
                   <div class="page-title clearfix panel-success">
                      <!--<h3>Cambio climático</h3> -->
                      <div class="pt10 pb10 text-center"><?php echo lang("water_reused_by_type"); ?></div>
                   </div>
                   <div class="panel-body">
                         <!--<div id="grafico_carbono"margin: 0 auto;"> -->
                      <div id="grafico_water_reused_by_type" style="height: 240px;"></div>
                   </div>
                </div>
            </div>
        
        </div>

	</div>
    
    
    <!-- Item Social -->
    <div class="panel panel-default mb15">
    
        <div class="page-title clearfix">
            <h1><?php echo lang("social"); ?></h1>
        </div>
        
        <div class="panel-body">

            <div class="col-md-12">
                <div class="panel panel-default">
                   <div class="page-title clearfix panel-success">
                      <!--<h3>Cambio climático</h3> -->
                      <div class="pt10 pb10 text-center"><?php echo lang("expenses"); ?></div>
                   </div>
                   <div class="panel-body">
                         <!--<div id="grafico_carbono"margin: 0 auto;"> -->
                      <div id="grafico_social_expenses" style="height: 240px;"></div>
                   </div>
                </div>
            </div>
        
        </div>

	</div>
    

</div>

<script type="text/javascript">

	$(document).ready(function(){
		
		//General Settings
		var decimals_separator = AppHelper.settings.decimalSeparatorClient;
		var thousands_separator = AppHelper.settings.thousandSeparatorClient;
		var decimal_numbers = AppHelper.settings.decimalNumbersClient;	
		
		var image_grafico_total_waste_produced;
		<?php if(count($array_total_residuos_producidos)) { ?>
			
			$('#grafico_total_waste_produced').highcharts({
				chart: {
					zoomType: 'x',
					reflow: true,
					vresetZoomButton: {
						position: {
							align: 'left',
							x: 0
						}
					},
					type: 'column',
				},
				title: {
					text: ''
				},
				subtitle: {
					text: ''
				},
				exporting:{
					enabled: true,
					/*
					yAxis: {
						min: 0,
						title: '%',	
						labels:{ 
							formatter: function() {
								return '<b>'+ this.point.name +'</b>: '+ numberFormat(this.percentage, decimal_numbers, decimals_separator, thousands_separator)+' %';
							}, 
						},
					},
					*/
					<?php $filename = $sigla_cliente."_".lang("total_waste_produced")."_".$fecha_actual; ?>
					filename: "<?php echo str_replace(' ', '_', $filename) ?>",
					buttons: {
						contextButton: {
							menuItems: [{
								text: '<?php echo lang("export_to_png"); ?>',
								onclick: function(){
									this.exportChart()
								},
								separator: false
							}]
						}
					}
				},
				xAxis: {
					type: 'category',
				},
				yAxis: {
					min: 0,
					title: {
						text: '<?php echo lang("waste_produced")." (".$unidad_masa_config.")"; ?>',
					},
					labels:{
						format: "{value:,." + decimal_numbers + "f}",
						/*formatter: function(){
							return numberFormat(this.value, decimal_numbers, decimals_separator, thousands_separator);
						},
						format: "{value:." + decimal_numbers + "f}",*/
					},
					stackLabels: {
						enabled: true,
						format: "{total:,." + decimal_numbers + "f}",
						//formatter: function(){return numberFormat(this.total, decimal_numbers, decimals_separator, thousands_separator);},
						//format: "{total:." + decimal_numbers + "f}",
					}
				},
				legend: {
					enabled: false
				},
				credits: {
					enabled: false
				},
				plotOptions: {
					column: {
						//stacking: 'percent',
						pointPadding: 0.2,
						borderWidth: 0,
						dataLabels: {
							enabled: true,
							color: '#000000',
							align: 'center',
							format: "{y:,." + decimal_numbers + "f}",
							/*formatter: function(){
								return numberFormat(this.y, decimal_numbers, decimals_separator, thousands_separator);
							},*/
							style: {
								fontSize: '10px',
								fontFamily: 'Segoe ui, sans-serif'
							}
						}
					}
				},
				tooltip: {
					//pointFormat: '<span style="color:{series.color}">{series.name}</span>: <b>{point.y}</b><br/>',
					headerFormat: '<span style="font-size:10px">{point.key}</span><table>',
					pointFormatter: function(){
						return '<tr><td style="color:'+this.series.color+';padding:0;">'+this.series.name+':</td>'+'<td style="padding:0;"><b>'+(numberFormat(this.y, decimal_numbers, decimals_separator, thousands_separator))+'</b></td></tr>';
					},
					footerFormat: '</table>',
					useHTML: true,
					shared: true
				},
				colors : ['#663300'],
				series: [{
					name: '<?php echo lang("waste_produced")." (".$unidad_masa_config.")"; ?>',
					data: [
						<?php foreach($array_total_residuos_producidos as $id_proyecto => $valor_proyecto) { ?>
							<?php foreach($valor_proyecto as $nombre_proyecto => $valor) { ?>
								['<?php echo $nombre_proyecto; ?>', <?php echo $valor; ?>],
							<?php } ?>
						<?php } ?>
					]
				}]
			
			});

		<?php } else { ?>
			
			$('#grafico_total_waste_produced').html("<strong><?php echo lang("no_information_available") ?></strong>").css({"text-align":"center", "vertical-align":"middle", "display":"flex","align-items":"center","justify-content":"center"});
			
		<?php } ?>
		
		var image_grafico_waste_recycling_totals;
		<?php if(count($array_reciclaje_residuos)) { ?>
		
			$('#grafico_waste_recycling_totals').highcharts({
				chart: {
					zoomType: 'x',
					reflow: true,
					vresetZoomButton: {
						position: {
							align: 'left',
							x: 0
						}
					},
					type: 'column',
					events: {
						load: function(event){
							
						}
					} 
				},
				title: {
					text: ''
				},
				credits: {
					enabled: false
				},
				exporting:{
					enabled: true,
					
					/*
					yAxis: {
						min: 0,
						title: '%',	
						labels:{ 
							formatter: function(){
								return numberFormat(this.value, decimal_numbers, decimals_separator, thousands_separator);
							} 
						},
					},
					
					chartOptions: {
						series: [
						{
							dataLabels: {
								style: {
									fontSize: "6px",
									fontWeight: "normal"
								}
							}
						},
						{
							dataLabels: {
								style: {
									fontSize: "6px",
									fontWeight: "normal"
								}
							}
						},
						{
							dataLabels: {
								style: {
									fontSize: "6px",
									fontWeight: "normal"
								}
							}
						},
					   
					   ],
					},
					*/
					
					<?php $filename = $sigla_cliente."_".lang("waste_recycling_totals")."_".$fecha_actual; ?>
					filename: "<?php echo str_replace(' ', '_', $filename) ?>",
					buttons: {
						contextButton: {
							menuItems: [{
								text: '<?php echo lang("export_to_png"); ?>',
								onclick: function(){
									this.exportChart()
								},
								separator: false
							}]
						}
					}
				},
				xAxis: {
					min: 0,
					categories: [
						<?php foreach($array_nombres_proyectos as $nombre_proyecto) { ?>
								'<?php echo $nombre_proyecto; ?>',
						<?php } ?>
					],
					crosshair: true
				},
				yAxis: {
					min: 0,
					title: {
						text: '%'
					},
					labels:{
						format: "{value:,." + decimal_numbers + "f}",
						/*formatter: function(){
							return numberFormat(this.value, decimal_numbers, decimals_separator, thousands_separator);
						},
						format: "{value:." + decimal_numbers + "f}", */
					},
					stackLabels: {
						enabled: true,
						format: "{total:,." + decimal_numbers + "f}",
						//formatter: function(){return numberFormat(this.total, decimal_numbers, decimals_separator, thousands_separator);},
						//format: "{total:." + decimal_numbers + "f}",
					}
				},
				legend: {
					align: 'center',
					verticalAlign: 'bottom',
					backgroundColor: (Highcharts.theme && Highcharts.theme.background2) || 'white',
					shadow: false
				},
				tooltip: {
					headerFormat: '<span style="font-size:10px">{point.key}</span><table>',
					pointFormatter: function(){
						return '<tr><td style="color:'+this.series.color+';padding:0;">'+this.series.name+':</td>'+'<td style="padding:0;"><b>'+(numberFormat(this.y, decimal_numbers, decimals_separator, thousands_separator))+'</b> ('+numberFormat(this.percentage, decimal_numbers, decimals_separator, thousands_separator)+' %)</td></tr>';
					},
					footerFormat: '</table>',
					useHTML: true,
					shared: true
				},
				plotOptions: {
					column: {
						stacking: 'percent',
						pointPadding: 0.2,
						borderWidth: 0,
						dataLabels: {
							enabled: true,
							color: '#000000',
							align: 'center',
							format: "{y:,." + decimal_numbers + "f}",
							/*formatter: function(){
								return numberFormat(this.y, decimal_numbers, decimals_separator, thousands_separator);
							},*/
							style: {
								fontSize: '10px',
								fontFamily: 'Segoe ui, sans-serif'
							}
						}
					}
				},
				subtitle: {
					text: ''
				},
				colors : ['#542A00', '#993300', '#996600'],
				series: [
					<?php foreach($array_reciclaje_residuos as $serie => $valores) { ?>
							{
								name: '<?php echo lang($serie); ?>',
								data: [
									<?php foreach($valores as $valor){ ?>
										<?php echo ($valor) ? $valor : 0; ?>,
									<?php } ?>
								]	
							},
					<?php } ?>
				],
			});

		<?php } else { ?>
			
			$('#grafico_waste_recycling_totals').html("<strong><?php echo lang("no_information_available") ?></strong>").css({"text-align":"center", "vertical-align":"middle", "display":"flex","align-items":"center","justify-content":"center"});
			
		<?php } ?>
		
		var image_grafico_total_emissions_by_source;
		<?php if(count($array_total_emisiones_fuente)) { ?>

			$('#grafico_total_emissions_by_source').highcharts({
				chart: {
					zoomType: 'x',
					reflow: true,
					vresetZoomButton: {
						position: {
							align: 'left',
							x: 0
						}
					},
					type: 'column',
					events: {
						load: function(event){
							
						}
					} 
				},
				title: {
					text: ''
				},
				credits: {
					enabled: false
				},
				exporting:{
					enabled: true,
					
					/*
					yAxis: {
						min: 0,
						title: '%',	
						labels:{ 
							formatter: function(){
								return numberFormat(this.value, decimal_numbers, decimals_separator, thousands_separator);
							} 
						},
					},
					
					chartOptions: {
						series: [
						{
							dataLabels: {
								style: {
									fontSize: "6px",
									fontWeight: "normal"
								}
							}
						},
						{
							dataLabels: {
								style: {
									fontSize: "6px",
									fontWeight: "normal"
								}
							}
						},
						{
							dataLabels: {
								style: {
									fontSize: "6px",
									fontWeight: "normal"
								}
							}
						},
					   
					   ],
					},
					*/
					
					<?php $filename = $sigla_cliente."_".lang("total_emissions_by_source")."_".$fecha_actual; ?>
					filename: "<?php echo str_replace(' ', '_', $filename) ?>",
					buttons: {
						contextButton: {
							menuItems: [{
								text: '<?php echo lang("export_to_png"); ?>',
								onclick: function(){
									this.exportChart()
								},
								separator: false
							}]
						}
					}
				},
				xAxis: {
					min: 0,
					categories: [
						<?php foreach($array_nombres_proyectos as $nombre_proyecto) { ?>
								'<?php echo $nombre_proyecto; ?>',
						<?php } ?>
					],
					crosshair: true
				},
				yAxis: {
					min: 0,
					title: {
						text: '%'
					},
					labels:{
						format: "{value:,." + decimal_numbers + "f}",
						/*formatter: function(){
							return numberFormat(this.value, decimal_numbers, decimals_separator, thousands_separator);
						},
						format: "{value:." + decimal_numbers + "f}", */
					},
					stackLabels: {
						enabled: true,
						format: "{total:,." + decimal_numbers + "f}",
						//formatter: function(){return numberFormat(this.total, decimal_numbers, decimals_separator, thousands_separator);},
						//format: "{total:." + decimal_numbers + "f}",
					}
				},
				legend: {
					align: 'center',
					verticalAlign: 'bottom',
					backgroundColor: (Highcharts.theme && Highcharts.theme.background2) || 'white',
					shadow: false
				},
				tooltip: {
					headerFormat: '<span style="font-size:10px">{point.key}</span><table>',
					pointFormatter: function(){
						return '<tr><td style="color:'+this.series.color+';padding:0;">'+this.series.name+':</td>'+'<td style="padding:0;"><b>'+(numberFormat(this.y, decimal_numbers, decimals_separator, thousands_separator))+'</b> ('+numberFormat(this.percentage, decimal_numbers, decimals_separator, thousands_separator)+' %)</td></tr>';
					},
					footerFormat: '</table>',
					useHTML: true,
					shared: true
				},
				plotOptions: {
					column: {
						stacking: 'percent',
						pointPadding: 0.2,
						borderWidth: 0,
						dataLabels: {
							enabled: true,
							color: '#000000',
							align: 'center',
							format: "{y:,." + decimal_numbers + "f}",
							/*formatter: function(){
								return numberFormat(this.y, decimal_numbers, decimals_separator, thousands_separator);
							},*/
							style: {
								fontSize: '10px',
								fontFamily: 'Segoe ui, sans-serif'
							}
						}
					}
				},
				subtitle: {
					text: ''
				},
				colors : ['#003300', '#00CC00', '#007800'],
				series: [
					<?php foreach($array_total_emisiones_fuente as $serie => $valores) { ?>
							{
								name: '<?php echo lang($serie); ?>',
								data: [
									<?php foreach($valores as $valor){ ?>
										<?php echo ($valor) ? $valor : 0; ?>,
									<?php } ?>
								]	
							},
					<?php } ?>
				],		
			
			});		

		<?php } else { ?>
			
			$('#grafico_total_emissions_by_source').html("<strong><?php echo lang("no_information_available") ?></strong>").css({"text-align":"center", "vertical-align":"middle", "display":"flex","align-items":"center","justify-content":"center"});
			
		<?php } ?>
		
		var image_grafico_total_energy_consumption;		
		<?php if(count($array_total_consumo_energia)) { ?>
		
			$('#grafico_total_energy_consumption').highcharts({
				chart: {
					zoomType: 'x',
					reflow: true,
					vresetZoomButton: {
						position: {
							align: 'left',
							x: 0
						}
					},
					type: 'column',
				},
				title: {
					text: ''
				},
				subtitle: {
					text: ''
				},
				exporting:{
					enabled: true,
					
					/*
					yAxis: {
						min: 0,
						title: '%',	
						labels:{ 
							formatter: function(){
								return numberFormat(this.value, decimal_numbers, decimals_separator, thousands_separator);
							} 
						},
					},
					*/
					
					<?php $filename = $sigla_cliente."_".lang("total_energy_consumption")."_".$fecha_actual; ?>
					filename: "<?php echo str_replace(' ', '_', $filename) ?>",
					buttons: {
						contextButton: {
							menuItems: [{
								text: '<?php echo lang("export_to_png"); ?>',
								onclick: function(){
									this.exportChart()
								},
								separator: false
							}]
						}
					}
				},
				xAxis: {
					type: 'category',
				},
				yAxis: {
					min: 0,
					title: {
						//text: '%',
						text: '<?php echo lang("energy_consumption")." (".$unidad_energia_config.")"; ?>'
					},
					labels:{
						format: "{value:,." + decimal_numbers + "f}",
						/*formatter: function(){
							return numberFormat(this.value, decimal_numbers, decimals_separator, thousands_separator);
						},
						format: "{value:." + decimal_numbers + "f}", */
					},
					stackLabels: {
						enabled: true,
						format: "{total:,." + decimal_numbers + "f}",
						//formatter: function(){return numberFormat(this.total, decimal_numbers, decimals_separator, thousands_separator);},
						//format: "{total:." + decimal_numbers + "f}",
					}
				},
				legend: {
					enabled: false
				},
				credits: {
					enabled: false
				},
				plotOptions: {
					column: {
						pointPadding: 0.2,
						borderWidth: 0,
						dataLabels: {
							enabled: true,
							color: '#000000',
							align: 'center',
							format: "{y:,." + decimal_numbers + "f}",
							/*formatter: function(){
								return numberFormat(this.y, decimal_numbers, decimals_separator, thousands_separator);
							},*/
							style: {
								fontSize: '10px',
								fontFamily: 'Segoe ui, sans-serif'
							}
						}
					}
				},
				tooltip: {
					headerFormat: '<span style="font-size:10px">{point.key}</span><table>',
					pointFormatter: function(){
						return '<tr><td style="color:'+this.series.color+';padding:0;">'+this.series.name+':</td>'+'<td style="padding:0;"><b>'+(numberFormat(this.y, decimal_numbers, decimals_separator, thousands_separator))+'</b></td></tr>';
					},
					footerFormat: '</table>',
					useHTML: true,
					shared: true
				},
				colors : ['#FF9900'],
				series: [{
					name: '<?php echo lang("energy_consumption")." (".$unidad_energia_config.")"; ?>',
					data: [
						<?php foreach($array_total_consumo_energia as $id_proyecto => $valor_proyecto) { ?>
							<?php foreach($valor_proyecto as $nombre_proyecto => $valor) { ?>
								['<?php echo $nombre_proyecto; ?>', <?php echo $valor; ?>],
							<?php } ?>
						<?php } ?>
					]
				}]
			
			});
			
		<?php } else { ?>
			
			$('#grafico_total_energy_consumption').html("<strong><?php echo lang("no_information_available") ?></strong>").css({"text-align":"center", "vertical-align":"middle", "display":"flex","align-items":"center","justify-content":"center"});
			
		<?php } ?>
		
		
		var image_grafico_energy_consumption_source_type;		
		<?php if(count($array_consumo_energia_tipo_fuente)) { ?>
		
			$('#grafico_energy_consumption_source_type').highcharts({
				chart: {
					zoomType: 'x',
					reflow: true,
					vresetZoomButton: {
						position: {
							align: 'left',
							x: 0
						}
					},
					type: 'column',
					events: {
						load: function(event){
							
						}
					} 
				},
				title: {
					text: ''
				},
				credits: {
					enabled: false
				},
				exporting:{
					enabled: true,
					
					/*
					yAxis: {
						min: 0,
						title: '%',	
						labels:{ 
							formatter: function(){
								return numberFormat(this.value, decimal_numbers, decimals_separator, thousands_separator);
							} 
						},
					},
					chartOptions: {
						series: [
						{
							dataLabels: {
								style: {
									fontSize: "6px",
									fontWeight: "normal"
								}
							}
						},
						{
							dataLabels: {
								style: {
									fontSize: "6px",
									fontWeight: "normal"
								}
							}
						},
						{
							dataLabels: {
								style: {
									fontSize: "6px",
									fontWeight: "normal"
								}
							}
						},
					   
					   ],
					},
					*/
					
					<?php $filename = $sigla_cliente."_".lang("energy_consumption_source_type")."_".$fecha_actual; ?>
					filename: "<?php echo str_replace(' ', '_', $filename) ?>",
					buttons: {
						contextButton: {
							menuItems: [{
								text: '<?php echo lang("export_to_png"); ?>',
								onclick: function(){
									this.exportChart()
								},
								separator: false
							}]
						}
					}
				},
				xAxis: {
					min: 0,
					categories: [
						<?php foreach($array_nombres_proyectos as $nombre_proyecto) { ?>
								'<?php echo $nombre_proyecto; ?>',
						<?php } ?>
					],
					crosshair: true
				},
				yAxis: {
					min: 0,
					title: {
						//text: '<?php echo lang("energy_consumption_mwh"); ?>'
						text: '%'
					},
					labels:{
						format: "{value:,." + decimal_numbers + "f}",
						/*formatter: function(){
							return numberFormat(this.value, decimal_numbers, decimals_separator, thousands_separator);
						},
						format: "{value:." + decimal_numbers + "f}", */
					},
					stackLabels: {
						enabled: true,
						format: "{total:,." + decimal_numbers + "f}",
						//formatter: function(){return numberFormat(this.total, decimal_numbers, decimals_separator, thousands_separator);},
						//format: "{total:." + decimal_numbers + "f}",
					}
				},
				legend: {
					align: 'center',
					verticalAlign: 'bottom',
					backgroundColor: (Highcharts.theme && Highcharts.theme.background2) || 'white',
					shadow: false
				},
				tooltip: {
					//pointFormat: '<span style="color:{series.color}">{series.name}</span>: <b>{point.y}</b> ({point.percentage:.0f}%)<br/>',
					//shared: true,
					headerFormat: '<span style="font-size:10px">{point.key}</span><table>',
					pointFormatter: function(){
						return '<tr><td style="color:'+this.series.color+';padding:0;">'+this.series.name+':</td>'+'<td style="padding:0;"><b>'+(numberFormat(this.y, decimal_numbers, decimals_separator, thousands_separator))+'</b> ('+numberFormat(this.percentage, decimal_numbers, decimals_separator, thousands_separator)+' %)</td></tr>';
					},
					footerFormat: '</table>',
					useHTML: true,
					shared: true
				},
				plotOptions: {
					column: {
						stacking: 'percent',
						pointPadding: 0.2,
						borderWidth: 0,
						dataLabels: {
							enabled: true,
							color: '#000000',
							align: 'center',
							format: "{y:,." + decimal_numbers + "f}",
							/*formatter: function(){
								return numberFormat(this.y, decimal_numbers, decimals_separator, thousands_separator);
							},*/
							style: {
								fontSize: '10px',
								fontFamily: 'Segoe ui, sans-serif'
							}
						}
					}
				},
				subtitle: {
					text: ''
				},
				colors : ['#FFC000', '#808080'],
				series: [
					<?php foreach($array_consumo_energia_tipo_fuente as $serie => $valores) { ?>
							{
								name: '<?php echo lang($serie); ?>',
								data: [
									<?php foreach($valores as $valor){ ?>
										<?php echo ($valor) ? $valor : 0; ?>,
									<?php } ?>
								]	
							},
					<?php } ?>
				],
			});

		<?php } else { ?>
			
			$('#grafico_energy_consumption_source_type').html("<strong><?php echo lang("no_information_available") ?></strong>").css({"text-align":"center", "vertical-align":"middle", "display":"flex","align-items":"center","justify-content":"center"});
			
		<?php } ?>
		
		
		var image_grafico_total_water_consumption;
		<?php if(count($array_total_consumo_agua)) { ?>
		
			$('#grafico_total_water_consumption').highcharts({
				chart: {
					zoomType: 'x',
					reflow: true,
					vresetZoomButton: {
						position: {
							align: 'left',
							x: 0
						}
					},
					type: 'column',
				},
				title: {
					text: ''
				},
				subtitle: {
					text: ''
				},
				exporting:{
					enabled: true,
					
					/*
					yAxis: {
						min: 0,
						title: '%',	
						labels:{ 
							formatter: function(){
								return numberFormat(this.value, decimal_numbers, decimals_separator, thousands_separator);
							} 
						},
					},
					*/
					
					<?php $filename = $sigla_cliente."_".lang("total_water_consumption")."_".$fecha_actual; ?>
					filename: "<?php echo str_replace(' ', '_', $filename) ?>",
					buttons: {
						contextButton: {
							menuItems: [{
								text: '<?php echo lang("export_to_png"); ?>',
								onclick: function(){
									this.exportChart()
								},
								separator: false
							}]
						}
					}
				},
				xAxis: {
					type: 'category',
				},
				yAxis: {
					min: 0,
					title: {
						text: '<?php echo lang("water_consumed")." (".$unidad_volumen_config.")"; ?>',
					},
					labels:{
						format: "{value:,." + decimal_numbers + "f}",
						/*formatter: function(){
							return numberFormat(this.value, decimal_numbers, decimals_separator, thousands_separator);
						},
						format: "{value:." + decimal_numbers + "f}", */
					},
					stackLabels: {
						enabled: true,
						format: "{total:,." + decimal_numbers + "f}",
						//formatter: function(){return numberFormat(this.total, decimal_numbers, decimals_separator, thousands_separator);},
						//format: "{total:." + decimal_numbers + "f}",
					}
				},
				legend: {
					enabled: false
				},
				credits: {
					enabled: false
				},
				plotOptions: {
					column: {
						pointPadding: 0.2,
						borderWidth: 0,
						dataLabels: {
							enabled: true,
							color: '#000000',
							align: 'center',
							format: "{y:,." + decimal_numbers + "f}",
							/*formatter: function(){
								return numberFormat(this.y, decimal_numbers, decimals_separator, thousands_separator);
							},*/
							style: {
								fontSize: '10px',
								fontFamily: 'Segoe ui, sans-serif'
							}
						}
					}
				},
				tooltip: {
					headerFormat: '<span style="font-size:10px">{point.key}</span><table>',
					pointFormatter: function(){
						return '<tr><td style="color:'+this.series.color+';padding:0;">'+this.series.name+':</td>'+'<td style="padding:0;"><b>'+(numberFormat(this.y, decimal_numbers, decimals_separator, thousands_separator))+'</b></td></tr>';
					},
					footerFormat: '</table>',
					useHTML: true,
					shared: true
				},
				colors : ['#00B0F0'],
				series: [{
					name: '<?php echo lang("water_consumed")." (".$unidad_volumen_config.")"; ?>',
					data: [
						<?php foreach($array_total_consumo_agua as $id_proyecto => $valor_proyecto) { ?>
							<?php foreach($valor_proyecto as $nombre_proyecto => $valor) { ?>
								['<?php echo $nombre_proyecto; ?>', <?php echo $valor; ?>],
							<?php } ?>
						<?php } ?>
					]
				}]
			
			});
		
		<?php } else { ?>
			
			$('#grafico_total_water_consumption').html("<strong><?php echo lang("no_information_available") ?></strong>").css({"text-align":"center", "vertical-align":"middle", "display":"flex","align-items":"center","justify-content":"center"});
			
		<?php } ?>
		
		
		var image_grafico_water_consumption_by_origin;
		<?php if(count($array_consumo_agua_procedencia)) { ?>
		
			$('#grafico_water_consumption_by_origin').highcharts({
				chart: {
					zoomType: 'x',
					reflow: true,
					vresetZoomButton: {
						position: {
							align: 'left',
							x: 0
						}
					},
					type: 'column',
					events: {
						load: function(event){
							
						}
					} 
				},
				title: {
					text: ''
				},
				credits: {
					enabled: false
				},
				exporting:{
					enabled: true,
					
					/*
					yAxis: {
						min: 0,
						title: '%',	
						labels:{ 
							formatter: function(){
								return numberFormat(this.value, decimal_numbers, decimals_separator, thousands_separator);
							} 
						},
					},
					
					chartOptions: {
						series: [
						{
							dataLabels: {
								style: {
									fontSize: "6px",
									fontWeight: "normal"
								}
							}
						},
						{
							dataLabels: {
								style: {
									fontSize: "6px",
									fontWeight: "normal"
								}
							}
						},
						{
							dataLabels: {
								style: {
									fontSize: "6px",
									fontWeight: "normal"
								}
							}
						},
					   
					   ],
					},
					*/
					
					<?php $filename = $sigla_cliente."_".lang("water_consumption_by_origin")."_".$fecha_actual; ?>
					filename: "<?php echo str_replace(' ', '_', $filename) ?>",
					buttons: {
						contextButton: {
							menuItems: [{
								text: '<?php echo lang("export_to_png"); ?>',
								onclick: function(){
									this.exportChart()
								},
								separator: false
							}]
						}
					}
				},
				xAxis: {
					min: 0,
					categories: [
						<?php foreach($array_nombres_proyectos as $nombre_proyecto) { ?>
								'<?php echo $nombre_proyecto; ?>',
						<?php } ?>
					],
					crosshair: true
				},
				yAxis: {
					min: 0,
					title: {
						text: '%'
					},
					labels:{
						format: "{value:,." + decimal_numbers + "f}",
						/*formatter: function(){
							return numberFormat(this.value, decimal_numbers, decimals_separator, thousands_separator);
						},
						format: "{value:." + decimal_numbers + "f}", */
					},
					stackLabels: {
						enabled: true,
						format: "{total:,." + decimal_numbers + "f}",
						//formatter: function(){return numberFormat(this.total, decimal_numbers, decimals_separator, thousands_separator);},
						//format: "{total:." + decimal_numbers + "f}",
					}
				},
				legend: {
					align: 'center',
					verticalAlign: 'bottom',
					backgroundColor: (Highcharts.theme && Highcharts.theme.background2) || 'white',
					shadow: false
				},
				tooltip: {
					headerFormat: '<span style="font-size:10px">{point.key}</span><table>',
					pointFormatter: function(){
						return '<tr><td style="color:'+this.series.color+';padding:0;">'+this.series.name+':</td>'+'<td style="padding:0;"><b>'+(numberFormat(this.y, decimal_numbers, decimals_separator, thousands_separator))+'</b> ('+numberFormat(this.percentage, decimal_numbers, decimals_separator, thousands_separator)+' %)</td></tr>';
					},
					footerFormat: '</table>',
					useHTML: true,
					shared: true
				},
				plotOptions: {
					column: {
						stacking: 'percent',
						pointPadding: 0.2,
						borderWidth: 0,
						dataLabels: {
							enabled: true,
							color: '#000000',
							align: 'center',
							format: "{y:,." + decimal_numbers + "f}",
							/*formatter: function(){
								return numberFormat(this.y, decimal_numbers, decimals_separator, thousands_separator);
							},*/
							style: {
								fontSize: '10px',
								fontFamily: 'Segoe ui, sans-serif'
							}
						}
					}
				},
				subtitle: {
					text: ''
				},
				colors : ['#006699', '#009999', '#66CCFF'],
				series: [
					<?php foreach($array_consumo_agua_procedencia as $serie => $valores) { ?>
							{
								name: '<?php echo lang($serie); ?>',
								data: [
									<?php foreach($valores as $valor){ ?>
										<?php echo ($valor) ? $valor : 0; ?>,
									<?php } ?>
								]	
							},
					<?php } ?>
				],
			});

		<?php } else { ?>
			
			$('#grafico_water_consumption_by_origin').html("<strong><?php echo lang("no_information_available") ?></strong>").css({"text-align":"center", "vertical-align":"middle", "display":"flex","align-items":"center","justify-content":"center"});
			
		<?php } ?>
		
		var image_grafico_water_reused_by_type;		
		<?php if(count($array_agua_reutilizada_tipo)) { ?>

			$('#grafico_water_reused_by_type').highcharts({
				chart: {
					zoomType: 'x',
					reflow: true,
					vresetZoomButton: {
						position: {
							align: 'left',
							x: 0
						}
					},
					type: 'column',
					events: {
						load: function(event){
							
						}
					} 
				},
				title: {
					text: ''
				},
				credits: {
					enabled: false
				},
				exporting:{
					enabled: true,
					
					/*
					yAxis: {
						min: 0,
						title: '%',	
						labels:{ 
							formatter: function(){
								return numberFormat(this.value, decimal_numbers, decimals_separator, thousands_separator);
							} 
						},
					},
					
					chartOptions: {
						series: [
						{
							dataLabels: {
								style: {
									fontSize: "6px",
									fontWeight: "normal"
								}
							}
						},
						{
							dataLabels: {
								style: {
									fontSize: "6px",
									fontWeight: "normal"
								}
							}
						},
						{
							dataLabels: {
								style: {
									fontSize: "6px",
									fontWeight: "normal"
								}
							}
						},
					   
					   ],
					},
					*/
					
					<?php $filename = $sigla_cliente."_".lang("water_reused_by_type")."_".$fecha_actual; ?>
					filename: "<?php echo str_replace(' ', '_', $filename) ?>",
					buttons: {
						contextButton: {
							menuItems: [{
								text: '<?php echo lang("export_to_png"); ?>',
								onclick: function(){
									this.exportChart()
								},
								separator: false
							}]
						}
					}
				},
				xAxis: {
					min: 0,
					categories: [
						<?php foreach($array_nombres_proyectos as $nombre_proyecto) { ?>
								'<?php echo $nombre_proyecto; ?>',
						<?php } ?>
					],
					crosshair: true
				},
				yAxis: {
					min: 0,
					title: {
						text: '%'
					},
					labels:{
						format: "{value:,." + decimal_numbers + "f}",
						/*formatter: function(){
							return numberFormat(this.value, decimal_numbers, decimals_separator, thousands_separator);
						},
						format: "{value:." + decimal_numbers + "f}",  */
					},
					stackLabels: {
						enabled: true,
						format: "{total:,." + decimal_numbers + "f}",
						//formatter: function(){return numberFormat(this.total, decimal_numbers, decimals_separator, thousands_separator);},
						//format: "{total:." + decimal_numbers + "f}",
					}
				},
				legend: {
					align: 'center',
					verticalAlign: 'bottom',
					backgroundColor: (Highcharts.theme && Highcharts.theme.background2) || 'white',
					shadow: false
				},
				tooltip: {
					headerFormat: '<span style="font-size:10px">{point.key}</span><table>',
					pointFormatter: function(){
						return '<tr><td style="color:'+this.series.color+';padding:0;">'+this.series.name+':</td>'+'<td style="padding:0;"><b>'+(numberFormat(this.y, decimal_numbers, decimals_separator, thousands_separator))+'</b> ('+numberFormat(this.percentage, decimal_numbers, decimals_separator, thousands_separator)+' %)</td></tr>';
					},
					footerFormat: '</table>',
					useHTML: true,
					shared: true
				},
				plotOptions: {
					column: {
						stacking: 'percent',
						pointPadding: 0.2,
						borderWidth: 0,
						dataLabels: {
							enabled: true,
							color: '#000000',
							align: 'center',
							format: "{y:,." + decimal_numbers + "f}",
							/*formatter: function(){
								return numberFormat(this.y, decimal_numbers, decimals_separator, thousands_separator);
							},*/
							style: {
								fontSize: '10px',
								fontFamily: 'Segoe ui, sans-serif'
							}
						}
					}
				},
				subtitle: {
					text: ''
				},
				colors : ['#000099', '#0066FF'],
				series: [
					<?php foreach($array_agua_reutilizada_tipo as $serie => $valores) { ?>
							{
								name: '<?php echo lang($serie); ?>',
								data: [
									<?php foreach($valores as $valor){ ?>
										<?php echo ($valor) ? $valor : 0; ?>,
									<?php } ?>
								]	
							},
					<?php } ?>
				],
			});			
		
		<?php } else { ?>
			
			$('#grafico_water_reused_by_type').html("<strong><?php echo lang("no_information_available") ?></strong>").css({"text-align":"center", "vertical-align":"middle", "display":"flex","align-items":"center","justify-content":"center"});
			
		<?php } ?>
		
		
		var image_grafico_social_expenses;
		<?php if(count($array_social_gastos)) { ?>

			$('#grafico_social_expenses').highcharts({
				chart: {
					zoomType: 'x',
					reflow: true,
					vresetZoomButton: {
						position: {
							align: 'left',
							x: 0
						}
					},
					type: 'column',
					events: {
						load: function(event){
							
						}
					} 
				},
				title: {
					text: ''
				},
				credits: {
					enabled: false
				},
				exporting:{
					enabled: true,
					
					/*
					yAxis: {
						min: 0,
						title: '%',	
						labels:{ 
							formatter: function(){
								return numberFormat(this.value, decimal_numbers, decimals_separator, thousands_separator);
							} 
						},
					},
					chartOptions: {
						series: [
						{
							dataLabels: {
								style: {
									fontSize: "6px",
									fontWeight: "normal"
								}
							}
						},
						{
							dataLabels: {
								style: {
									fontSize: "6px",
									fontWeight: "normal"
								}
							}
						},
						{
							dataLabels: {
								style: {
									fontSize: "6px",
									fontWeight: "normal"
								}
							}
						},
					   
					   ],
					},
					*/
					
					<?php $filename = $sigla_cliente."_".lang("social")."_".lang("expenses")."_".$fecha_actual; ?>
					filename: "<?php echo str_replace(' ', '_', $filename) ?>",
					buttons: {
						contextButton: {
							menuItems: [{
								text: '<?php echo lang("export_to_png"); ?>',
								onclick: function(){
									this.exportChart()
								},
								separator: false
							}]
						}
					}
				},
				xAxis: {
					min: 0,
					categories: [
						<?php foreach($array_nombres_proyectos as $nombre_proyecto) { ?>
								'<?php echo $nombre_proyecto; ?>',
						<?php } ?>
					],
					crosshair: true
				},
				yAxis: {
					min: 0,
					title: {
						text : '<?php echo lang("euros"); ?>'
					},
					labels:{
						format: "{value:,." + decimal_numbers + "f}",
						/*formatter: function(){
							return numberFormat(this.value, decimal_numbers, decimals_separator, thousands_separator);
						},
						format: "{value:." + decimal_numbers + "f}", */
					},
					stackLabels: {
						enabled: true,
						format: "{total:,." + decimal_numbers + "f}",
						//formatter: function(){return numberFormat(this.total, decimal_numbers, decimals_separator, thousands_separator);},
						//format: "{total:." + decimal_numbers + "f}",
					}
				},
				legend: {
					align: 'center',
					verticalAlign: 'bottom',
					backgroundColor: (Highcharts.theme && Highcharts.theme.background2) || 'white',
					shadow: false
				},
				tooltip: {
					headerFormat: '<span style="font-size:10px">{point.key}</span><table>',
					pointFormatter: function(){
						return '<tr><td style="color:'+this.series.color+';padding:0;">'+this.series.name+':</td>'+'<td style="padding:0;"><b>'+(numberFormat(this.y, decimal_numbers, decimals_separator, thousands_separator))+'</b> ('+numberFormat(this.percentage, decimal_numbers, decimals_separator, thousands_separator)+' %)</td></tr>';
					},
					footerFormat: '</table>',
					useHTML: true,
					shared: true
				},
				plotOptions: {
					column: {
						stacking: 'percent',
						pointPadding: 0.2,
						borderWidth: 0,
						dataLabels: {
							enabled: true,
							color: '#000000',
							align: 'center',
							format: "{y:,." + decimal_numbers + "f}",
							/*formatter: function(){
								return numberFormat(this.y, decimal_numbers, decimals_separator, thousands_separator);
							},*/
							style: {
								fontSize: '10px',
								fontFamily: 'Segoe ui, sans-serif'
							}
						}
					}
				},
				subtitle: {
					text: ''
				},
				colors : ['#990000', '#CC0000'],
				series: [
					<?php foreach($array_social_gastos as $serie => $valores) { ?>
							{
								name: '<?php echo lang($serie); ?>',
								data: [
									<?php foreach($valores as $valor){ ?>
										<?php echo ($valor) ? $valor : 0; ?>,
									<?php } ?>
								]	
							},
					<?php } ?>
				],
			});
			
		<?php } else { ?>
			
			$('#grafico_social_expenses').html("<strong><?php echo lang("no_information_available"); ?></strong>").css({"text-align":"center", "vertical-align":"middle", "display":"flex","align-items":"center","justify-content":"center"});
			
		<?php } ?>


		
		$('#export_pdf').click(function(e){
			
			appLoader.show();
			
			var image_grafico_total_waste_produced;
			<?php if(count($array_total_residuos_producidos)) { ?>
				
				$('#grafico_total_waste_produced').highcharts().options.plotOptions.pie.dataLabels.enabled = true;
				$('#grafico_total_waste_produced').highcharts().options.title.text = "<?php echo lang("total_waste_produced"); ?>";
				$('#grafico_total_waste_produced').highcharts().options.plotOptions.pie.dataLabels.style.fontSize = "20px";
				$('#grafico_total_waste_produced').highcharts().options.plotOptions.pie.dataLabels.style.fontWeight = "normal";
				$('#grafico_total_waste_produced').highcharts().options.legend.itemStyle.fontSize = "15px";
				
				var chart = $('#grafico_total_waste_produced').highcharts().options.chart;
				var title = $('#grafico_total_waste_produced').highcharts().options.title;
				var series = $('#grafico_total_waste_produced').highcharts().options.series;
				var plotOptions = $('#grafico_total_waste_produced').highcharts().options.plotOptions;
				var colors = $('#grafico_total_waste_produced').highcharts().options.colors;
				var exporting = $('#grafico_total_waste_produced').highcharts().options.exporting;
				var credits = $('#grafico_total_waste_produced').highcharts().options.credits;
				var legend = $('#grafico_total_waste_produced').highcharts().options.legend;
				var xAxis = $('#grafico_total_waste_produced').highcharts().options.xAxis;
				var yAxis = $('#grafico_total_waste_produced').highcharts().options.yAxis;
				
				var obj = {};
				obj.options = JSON.stringify({
					"chart":chart,
					"title":title,
					"series":series,
					"plotOptions":plotOptions,
					"colors":colors,
					"exporting":exporting,
					"credits":credits,
					"legend":legend,
					"xAxis":xAxis,
					"yAxis":yAxis
				});
				
				obj.type = 'image/png';
				obj.width = '1600';
				obj.scale = '2';
				obj.async = true;
				
				var globalOptions = {lang:{numericSymbols: null, thousandsSep: thousands_separator, decimalPoint: decimals_separator}};
				obj.globaloptions = JSON.stringify(globalOptions);
	
				image_grafico_total_waste_produced = AppHelper.highchartsExportUrlQuery+'/'+getChartName(obj)+'.png';
				
				$('#grafico_total_waste_produced').highcharts().options.plotOptions.pie.dataLabels.enabled = false;
				$('#grafico_total_waste_produced').highcharts().options.legend.itemStyle.fontSize = "9px;";
				
			<?php } ?>
			
			<?php if(count($array_reciclaje_residuos)) { ?>
				
				$('#grafico_waste_recycling_totals').highcharts().options.plotOptions.pie.dataLabels.enabled = true;
				$('#grafico_waste_recycling_totals').highcharts().options.title.text = "<?php echo lang("waste_recycling"); ?>";
				$('#grafico_waste_recycling_totals').highcharts().options.plotOptions.pie.dataLabels.style.fontSize = "20px";
				$('#grafico_waste_recycling_totals').highcharts().options.plotOptions.pie.dataLabels.style.fontWeight = "normal";
				$('#grafico_waste_recycling_totals').highcharts().options.legend.itemStyle.fontSize = "15px";
				
				var chart = $('#grafico_waste_recycling_totals').highcharts().options.chart;
				var title = $('#grafico_waste_recycling_totals').highcharts().options.title;
				var series = $('#grafico_waste_recycling_totals').highcharts().options.series;
				var plotOptions = $('#grafico_waste_recycling_totals').highcharts().options.plotOptions;
				var colors = $('#grafico_waste_recycling_totals').highcharts().options.colors;
				var exporting = $('#grafico_waste_recycling_totals').highcharts().options.exporting;
				var credits = $('#grafico_waste_recycling_totals').highcharts().options.credits;
				var legend = $('#grafico_waste_recycling_totals').highcharts().options.legend;
				var xAxis = $('#grafico_waste_recycling_totals').highcharts().options.xAxis;
				var yAxis = $('#grafico_waste_recycling_totals').highcharts().options.yAxis;
				
				var obj = {};
				obj.options = JSON.stringify({
					"chart":chart,
					"title":title,
					"series":series,
					"plotOptions":plotOptions,
					"colors":colors,
					"exporting":exporting,
					"credits":credits,
					"legend":legend,
					"xAxis":xAxis,
					"yAxis":yAxis
				});
				
				obj.type = 'image/png';
				obj.width = '1600';
				obj.scale = '2';
				obj.async = true;
				
				var globalOptions = {lang:{numericSymbols: null, thousandsSep: thousands_separator, decimalPoint: decimals_separator}};
				obj.globaloptions = JSON.stringify(globalOptions);
	
				image_grafico_waste_recycling_totals = AppHelper.highchartsExportUrlQuery+'/'+getChartName(obj)+'.png';
				
				$('#grafico_waste_recycling_totals').highcharts().options.plotOptions.pie.dataLabels.enabled = false;
				$('#grafico_waste_recycling_totals').highcharts().options.legend.itemStyle.fontSize = "9px;";
				
			<?php } ?>
			
			<?php if(count($array_total_emisiones_fuente)) { ?>
			
				$('#grafico_total_emissions_by_source').highcharts().options.title.text = "<?php echo lang("total_emissions_by_source"); ?>";
				$('#grafico_total_emissions_by_source').highcharts().options.legend.itemStyle.fontSize = "15px";
				
				var chart = $('#grafico_total_emissions_by_source').highcharts().options.chart;
				var title = $('#grafico_total_emissions_by_source').highcharts().options.title;
				var series = $('#grafico_total_emissions_by_source').highcharts().options.series;
				var plotOptions = $('#grafico_total_emissions_by_source').highcharts().options.plotOptions;
				var colors = $('#grafico_total_emissions_by_source').highcharts().options.colors;
				var exporting = $('#grafico_total_emissions_by_source').highcharts().options.exporting;
				var credits = $('#grafico_total_emissions_by_source').highcharts().options.credits;
				var legend = $('#grafico_total_emissions_by_source').highcharts().options.legend;
				var xAxis = $('#grafico_total_emissions_by_source').highcharts().options.xAxis;
				var yAxis = $('#grafico_total_emissions_by_source').highcharts().options.yAxis;
				
				var obj = {};
				obj.options = JSON.stringify({
					"chart":chart,
					"title":title,
					"series":series,
					"plotOptions":plotOptions,
					"colors":colors,
					"exporting":exporting,
					"credits":credits,
					"legend":legend,
					"xAxis":xAxis,
					"yAxis":yAxis
				});
				
				obj.type = 'image/png';
				obj.width = '1600';
				obj.scale = '2';
				obj.async = true;
				
				var globalOptions = {lang:{numericSymbols: null, thousandsSep: thousands_separator, decimalPoint: decimals_separator}};
				obj.globaloptions = JSON.stringify(globalOptions);
	
				image_grafico_total_emissions_by_source = AppHelper.highchartsExportUrlQuery+'/'+getChartName(obj)+'.png';
				
				$('#grafico_total_emissions_by_source').highcharts().options.plotOptions.pie.dataLabels.enabled = false;
				$('#grafico_total_emissions_by_source').highcharts().options.legend.itemStyle.fontSize = "12px;";
			
			<?php } ?>
			
				
			<?php if(count($array_total_consumo_energia)) { ?>
			
				$('#grafico_total_energy_consumption').highcharts().options.plotOptions.pie.dataLabels.enabled = true;
				$('#grafico_total_energy_consumption').highcharts().options.title.text = "<?php echo lang("total_energy_consumption"); ?>";
				$('#grafico_total_energy_consumption').highcharts().options.plotOptions.pie.dataLabels.style.fontSize = "20px";
				$('#grafico_total_energy_consumption').highcharts().options.plotOptions.pie.dataLabels.style.fontWeight = "normal";
				$('#grafico_total_energy_consumption').highcharts().options.legend.itemStyle.fontSize = "15px";
				
				var chart = $('#grafico_total_energy_consumption').highcharts().options.chart;
				var title = $('#grafico_total_energy_consumption').highcharts().options.title;
				var series = $('#grafico_total_energy_consumption').highcharts().options.series;
				var plotOptions = $('#grafico_total_energy_consumption').highcharts().options.plotOptions;
				var colors = $('#grafico_total_energy_consumption').highcharts().options.colors;
				var exporting = $('#grafico_total_energy_consumption').highcharts().options.exporting;
				var credits = $('#grafico_total_energy_consumption').highcharts().options.credits;
				var legend = $('#grafico_total_energy_consumption').highcharts().options.legend;
	
				var xAxis = $('#grafico_total_energy_consumption').highcharts().options.xAxis;
				var yAxis = $('#grafico_total_energy_consumption').highcharts().options.yAxis;
				
				var obj = {};
				obj.options = JSON.stringify({
					"chart":chart,
					"title":title,
					"series":series,
					"plotOptions":plotOptions,
					"colors":colors,
					"exporting":exporting,
					"credits":credits,
					"legend":legend,
					"xAxis":xAxis,
					"yAxis":yAxis
				});
				
				obj.type = 'image/png';
				obj.width = '1600';
				obj.scale = '2';
				obj.async = true;
				
				var globalOptions = {lang:{numericSymbols: null, thousandsSep: thousands_separator, decimalPoint: decimals_separator}};
				obj.globaloptions = JSON.stringify(globalOptions);
	
				image_grafico_total_energy_consumption = AppHelper.highchartsExportUrlQuery+'/'+getChartName(obj)+'.png';
				
				$('#grafico_total_energy_consumption').highcharts().options.plotOptions.pie.dataLabels.enabled = false;
				$('#grafico_total_energy_consumption').highcharts().options.legend.itemStyle.fontSize = "9px;";	
			
			<?php } ?>
			
			<?php if(count($array_consumo_energia_tipo_fuente)) { ?>	
			
				$('#grafico_energy_consumption_source_type').highcharts().options.title.text = "<?php echo lang("energy_consumption_source_type"); ?>";
				$('#grafico_energy_consumption_source_type').highcharts().options.legend.itemStyle.fontSize = "15px";
				
				var chart = $('#grafico_energy_consumption_source_type').highcharts().options.chart;
				var title = $('#grafico_energy_consumption_source_type').highcharts().options.title;
				var series = $('#grafico_energy_consumption_source_type').highcharts().options.series;
				var plotOptions = $('#grafico_energy_consumption_source_type').highcharts().options.plotOptions;
				var colors = $('#grafico_energy_consumption_source_type').highcharts().options.colors;
				var exporting = $('#grafico_energy_consumption_source_type').highcharts().options.exporting;
				var credits = $('#grafico_energy_consumption_source_type').highcharts().options.credits;
				var legend = $('#grafico_energy_consumption_source_type').highcharts().options.legend;
				var xAxis = $('#grafico_energy_consumption_source_type').highcharts().options.xAxis;
				var yAxis = $('#grafico_energy_consumption_source_type').highcharts().options.yAxis;
				
				var obj = {};
				obj.options = JSON.stringify({
					"chart":chart,
					"title":title,
					"series":series,
					"plotOptions":plotOptions,
					"colors":colors,
					"exporting":exporting,
					"credits":credits,
					"legend":legend,
					"xAxis":xAxis,
					"yAxis":yAxis
				});
				
				obj.type = 'image/png';
				obj.width = '1600';
				obj.scale = '2';
				obj.async = true;
				
				var globalOptions = {lang:{numericSymbols: null, thousandsSep: thousands_separator, decimalPoint: decimals_separator}};
				obj.globaloptions = JSON.stringify(globalOptions);
	
				image_grafico_energy_consumption_source_type = AppHelper.highchartsExportUrlQuery+'/'+getChartName(obj)+'.png';
				
				$('#grafico_energy_consumption_source_type').highcharts().options.plotOptions.pie.dataLabels.enabled = false;
				$('#grafico_energy_consumption_source_type').highcharts().options.legend.itemStyle.fontSize = "12px;";
				
			<?php } ?>	
				
			<?php if(count($array_total_consumo_agua)) { ?>	
				
				$('#grafico_total_water_consumption').highcharts().options.plotOptions.pie.dataLabels.enabled = true;
				$('#grafico_total_water_consumption').highcharts().options.title.text = "<?php echo lang("total_water_consumption"); ?>";
				$('#grafico_total_water_consumption').highcharts().options.plotOptions.pie.dataLabels.style.fontSize = "20px";
				$('#grafico_total_water_consumption').highcharts().options.plotOptions.pie.dataLabels.style.fontWeight = "normal";
				$('#grafico_total_water_consumption').highcharts().options.legend.itemStyle.fontSize = "15px";
				
				var chart = $('#grafico_total_water_consumption').highcharts().options.chart;
				var title = $('#grafico_total_water_consumption').highcharts().options.title;
				var series = $('#grafico_total_water_consumption').highcharts().options.series;
				var plotOptions = $('#grafico_total_water_consumption').highcharts().options.plotOptions;
				var colors = $('#grafico_total_water_consumption').highcharts().options.colors;
				var exporting = $('#grafico_total_water_consumption').highcharts().options.exporting;
				var credits = $('#grafico_total_water_consumption').highcharts().options.credits;
				var legend = $('#grafico_total_water_consumption').highcharts().options.legend;
				var xAxis = $('#grafico_total_water_consumption').highcharts().options.xAxis;
				var yAxis = $('#grafico_total_water_consumption').highcharts().options.yAxis;
				
				var obj = {};
				obj.options = JSON.stringify({
					"chart":chart,
					"title":title,
					"series":series,
					"plotOptions":plotOptions,
					"colors":colors,
					"exporting":exporting,
					"credits":credits,
					"legend":legend,
					"xAxis":xAxis,
					"yAxis":yAxis
				});
				
				obj.type = 'image/png';
				obj.width = '1600';
				obj.scale = '2';
				obj.async = true;
				
				var globalOptions = {lang:{numericSymbols: null, thousandsSep: thousands_separator, decimalPoint: decimals_separator}};
				obj.globaloptions = JSON.stringify(globalOptions);
	
				image_grafico_total_water_consumption = AppHelper.highchartsExportUrlQuery+'/'+getChartName(obj)+'.png';
				
				$('#grafico_total_water_consumption').highcharts().options.plotOptions.pie.dataLabels.enabled = false;
				$('#grafico_total_water_consumption').highcharts().options.legend.itemStyle.fontSize = "9px;";
			
			<?php } ?>	
				
			<?php if(count($array_consumo_agua_procedencia)) { ?>	
				
				$('#grafico_water_consumption_by_origin').highcharts().options.title.text = "<?php echo lang("water_consumption_by_origin"); ?>";
				$('#grafico_water_consumption_by_origin').highcharts().options.legend.itemStyle.fontSize = "15px";
				
				var chart = $('#grafico_water_consumption_by_origin').highcharts().options.chart;
				var title = $('#grafico_water_consumption_by_origin').highcharts().options.title;
				var series = $('#grafico_water_consumption_by_origin').highcharts().options.series;
				var plotOptions = $('#grafico_water_consumption_by_origin').highcharts().options.plotOptions;
				var colors = $('#grafico_water_consumption_by_origin').highcharts().options.colors;
				var exporting = $('#grafico_water_consumption_by_origin').highcharts().options.exporting;
				var credits = $('#grafico_water_consumption_by_origin').highcharts().options.credits;
				var legend = $('#grafico_water_consumption_by_origin').highcharts().options.legend;
				var xAxis = $('#grafico_water_consumption_by_origin').highcharts().options.xAxis;
				var yAxis = $('#grafico_water_consumption_by_origin').highcharts().options.yAxis;
				
				var obj = {};
				obj.options = JSON.stringify({
					"chart":chart,
					"title":title,
					"series":series,
					"plotOptions":plotOptions,
					"colors":colors,
					"exporting":exporting,
					"credits":credits,
					"legend":legend,
					"xAxis":xAxis,
					"yAxis":yAxis
				});
				
				obj.type = 'image/png';
				obj.width = '1600';
				obj.scale = '2';
				obj.async = true;
				
				var globalOptions = {lang:{numericSymbols: null, thousandsSep: thousands_separator, decimalPoint: decimals_separator}};
				obj.globaloptions = JSON.stringify(globalOptions);
	
				image_grafico_water_consumption_by_origin = AppHelper.highchartsExportUrlQuery+'/'+getChartName(obj)+'.png';
				
				$('#grafico_water_consumption_by_origin').highcharts().options.plotOptions.pie.dataLabels.enabled = false;
				$('#grafico_water_consumption_by_origin').highcharts().options.legend.itemStyle.fontSize = "12px;";
				
			<?php } ?>		
				
			<?php if(count($array_agua_reutilizada_tipo)) { ?>	
				
				$('#grafico_water_reused_by_type').highcharts().options.title.text = "<?php echo lang("water_reused_by_type"); ?>";
				$('#grafico_water_reused_by_type').highcharts().options.legend.itemStyle.fontSize = "15px";
				
				var chart = $('#grafico_water_reused_by_type').highcharts().options.chart;
				var title = $('#grafico_water_reused_by_type').highcharts().options.title;
				var series = $('#grafico_water_reused_by_type').highcharts().options.series;
				var plotOptions = $('#grafico_water_reused_by_type').highcharts().options.plotOptions;
				var colors = $('#grafico_water_reused_by_type').highcharts().options.colors;
				var exporting = $('#grafico_water_reused_by_type').highcharts().options.exporting;
				var credits = $('#grafico_water_reused_by_type').highcharts().options.credits;
				var legend = $('#grafico_water_reused_by_type').highcharts().options.legend;
				var xAxis = $('#grafico_water_reused_by_type').highcharts().options.xAxis;
				var yAxis = $('#grafico_water_reused_by_type').highcharts().options.yAxis;
				
				var obj = {};
				obj.options = JSON.stringify({
					"chart":chart,
					"title":title,
					"series":series,
					"plotOptions":plotOptions,
					"colors":colors,
					"exporting":exporting,
					"credits":credits,
					"legend":legend,
					"xAxis":xAxis,
					"yAxis":yAxis
				});
				
				obj.type = 'image/png';
				obj.width = '1600';
				obj.scale = '2';
				obj.async = true;
				
				var globalOptions = {lang:{numericSymbols: null, thousandsSep: thousands_separator, decimalPoint: decimals_separator}};
				obj.globaloptions = JSON.stringify(globalOptions);
	
				image_grafico_water_reused_by_type = AppHelper.highchartsExportUrlQuery+'/'+getChartName(obj)+'.png';
				
				$('#grafico_water_reused_by_type').highcharts().options.plotOptions.pie.dataLabels.enabled = false;
				$('#grafico_water_reused_by_type').highcharts().options.legend.itemStyle.fontSize = "12px;";
				
			<?php } ?>	
				
			<?php if(count($array_social_gastos)) { ?>	
				
				$('#grafico_social_expenses').highcharts().options.title.text = "<?php echo lang("expenses"); ?>";
				$('#grafico_social_expenses').highcharts().options.legend.itemStyle.fontSize = "15px";
				
				var chart = $('#grafico_social_expenses').highcharts().options.chart;
				var title = $('#grafico_social_expenses').highcharts().options.title;
				var series = $('#grafico_social_expenses').highcharts().options.series;
				var plotOptions = $('#grafico_social_expenses').highcharts().options.plotOptions;
				var colors = $('#grafico_social_expenses').highcharts().options.colors;
				var exporting = $('#grafico_social_expenses').highcharts().options.exporting;
				var credits = $('#grafico_social_expenses').highcharts().options.credits;
				var legend = $('#grafico_social_expenses').highcharts().options.legend;
				var xAxis = $('#grafico_social_expenses').highcharts().options.xAxis;
				var yAxis = $('#grafico_social_expenses').highcharts().options.yAxis;
				
				var obj = {};
				obj.options = JSON.stringify({
					"chart":chart,
					"title":title,
					"series":series,
					"plotOptions":plotOptions,
					"colors":colors,
					"exporting":exporting,
					"credits":credits,
					"legend":legend,
					"xAxis":xAxis,
					"yAxis":yAxis
				});
				
				obj.type = 'image/png';
				obj.width = '1600';
				obj.scale = '2';
				obj.async = true;
				
				var globalOptions = {lang:{numericSymbols: null, thousandsSep: thousands_separator, decimalPoint: decimals_separator}};
				obj.globaloptions = JSON.stringify(globalOptions);
	
				image_grafico_social_expenses = AppHelper.highchartsExportUrlQuery+'/'+getChartName(obj)+'.png';
				
				$('#grafico_social_expenses').highcharts().options.plotOptions.pie.dataLabels.enabled = false;
				$('#grafico_social_expenses').highcharts().options.legend.itemStyle.fontSize = "12px;";
				
			<?php } ?>	
			
			var id_pais = $('#pais').val();
			var id_fase = $('#fase').val();
			var id_tech = $('#tecnologia').val();
			var start_date = $('#start_date').val();
			var end_date = $('#end_date').val();
		
			$.ajax({
				url:  '<?php echo_uri("KPI_Charts_between_projects/get_pdf") ?>',
				type:  'post',
				data: {
					id_pais: id_pais,
					id_fase: id_fase,
					id_tech: id_tech,
					start_date: start_date,
					end_date: end_date,
					image_grafico_total_waste_produced: image_grafico_total_waste_produced,
					image_grafico_waste_recycling_totals: image_grafico_waste_recycling_totals,
					image_grafico_total_emissions_by_source: image_grafico_total_emissions_by_source,
					image_grafico_total_energy_consumption: image_grafico_total_energy_consumption,
					image_grafico_energy_consumption_source_type: image_grafico_energy_consumption_source_type,
					image_grafico_total_water_consumption: image_grafico_total_water_consumption,
					image_grafico_water_consumption_by_origin: image_grafico_water_consumption_by_origin,
					image_grafico_water_reused_by_type: image_grafico_water_reused_by_type,
					image_grafico_social_expenses: image_grafico_social_expenses
				},
				//dataType:'json',
				success: function(respuesta){;
										
					var uri = '<?php echo get_setting("temp_file_path") ?>' + respuesta;
					console.log(uri);
					var link = document.createElement("a");
					link.download = respuesta;
					link.href = uri;
					link.click();
					
					borrar_temporal(uri);
				}
			});
		
		});
		
		function borrar_temporal(uri){
				
			$.ajax({
				url:  '<?php echo_uri("compromises_compliance_client/borrar_temporal") ?>',
				type:  'post',
				data: {uri:uri},
				//dataType:'json',
				success: function(respuesta){
					appLoader.hide();
				}
	
			});
	
		}
		
		function getChartName(obj){
			var tmp = null;
			$.support.cors = true;
			$.ajax({
				async: false,
				type: 'post',
				dataType: 'text',
				url : AppHelper.highchartsExportUrl,
				data: obj,
				crossDomain:true,
				success: function (data) {
					tmp = data.replace(/files\//g,'');
					tmp = tmp.replace(/.png/g,'');
				}
			});
			return tmp;
		}
		 
	});

</script>